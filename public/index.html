<!-- index.html -->
<!doctype html>

<!-- ASSIGN OUR ANGULAR MODULE -->
<html ng-controller="mainController" ng-app="scotchTodo">
<head>
    <!-- META -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

    <title>MEANLoadr | SMLoadr on a MEAN Stack</title>

  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <style>
        html                    { overflow-y:scroll; }
        body                    { padding-top:50px; }
        #todo-list              { margin-bottom:30px; }
    </style>

    <!-- SPELLS -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.js"></script><!-- load angular -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.3/howler.js"></script>
    <script src="core.js"></script>


    

</head>
<!-- SET THE CONTROLLER AND GET ALL TODOS -->
<body ng-app="scotchTodo" >
    <div class="container">

        <!-- HEADER AND TODO COUNT -->
        <div class="jumbotron text-center">
            <h1>MEANLoadr</h1>
            <h4>Based on SMLoadr v1.20.0</h4>
            <h6><a href="https://git.fuwafuwa.moe/SMLoadrDev/SMLoadr">https://git.fuwafuwa.moe/SMLoadrDev/SMLoadr</a></h6>
            
        </div>

        <!-- TODO LIST -->
        <div id="todo-list" class="row">
            <div class="col-sm-4 col-sm-offset-4">

                <!-- LOOP OVER THE TODOS IN $scope.todos -->
                <div class="checkbox" ng-repeat="todo in todos">
                    <label>
                        <input type="checkbox" ng-click="deleteTodo(todo._id)"> {{ todo.text }}
                    </label>
                </div>

            </div>
        </div>

        <!-- FORM TO CREATE TODOS -->
        <div id="todo-form" class="row">
            <div class="col-sm-8 col-sm-offset-2 text-center">
                <form ng-if="!arlEntered">
                    <div class="form-group">

                        <!-- Arl cookie shown first -->
                        <input id="arlInput" type="text" class="form-control input-lg text-center" placeholder="arl cookie" ng-model="formData.arl">
                         </div>

                    <!-- createStream() will send the arl cookie and deezer url to smloadr -->
                    <button ng-if="!arlSubmitted" type="submit" class="btn btn-primary btn-lg" ng-click="submitArl()">Submit arl</button>
                    <!-- Preloader for submitting arl -->
                    <div ng-if="arlSubmitted">
                        <p>Connecting to deezer api...</p>
                        <div class="preloader-wrapper big active">
                            <div class="spinner-layer spinner-blue">
                              <div class="circle-clipper left">
                                <div class="circle"></div>
                              </div><div class="gap-patch">
                                <div class="circle"></div>
                              </div><div class="circle-clipper right">
                                <div class="circle"></div>
                              </div>
                            </div>
                      
                            <div class="spinner-layer spinner-red">
                              <div class="circle-clipper left">
                                <div class="circle"></div>
                              </div><div class="gap-patch">
                                <div class="circle"></div>
                              </div><div class="circle-clipper right">
                                <div class="circle"></div>
                              </div>
                            </div>
                      
                            <div class="spinner-layer spinner-yellow">
                              <div class="circle-clipper left">
                                <div class="circle"></div>
                              </div><div class="gap-patch">
                                <div class="circle"></div>
                              </div><div class="circle-clipper right">
                                <div class="circle"></div>
                              </div>
                            </div>
                      
                            <div class="spinner-layer spinner-green">
                              <div class="circle-clipper left">
                                <div class="circle"></div>
                              </div><div class="gap-patch">
                                <div class="circle"></div>
                              </div><div class="circle-clipper right">
                                <div class="circle"></div>
                              </div>
                            </div>
                            </div>
                    </div>

                </form>   
                <br>   
                <p ng-if="arlEntered">Connected to the deezer service!</p>
                          
                <form ng-if="arlEntered">
                    <div class="form-group">
                        <!-- BIND THIS VALUE TO formData.text IN ANGULAR -->
                        <input type="text" class="form-control input-lg text-center" placeholder="https://www.deezer.com/us/track/1109737" ng-model="formData.deezer_url">
                    </div>

                    <!-- createStream() will send the arl cookie and deezer url to smloadr -->
                    <button type="submit" class="btn btn-primary btn-lg" ng-click="createStream()">Stream it in my browser</button>
                    <!-- Preloader for streaming in my browser  -->
                    <div ng-if="deezerUrlSubmitted && !deezerUrlEntered">
                            <p>Downloading song...</p>
                            <div class="preloader-wrapper big active">
                                <div class="spinner-layer spinner-blue">
                                  <div class="circle-clipper left">
                                    <div class="circle"></div>
                                  </div><div class="gap-patch">
                                    <div class="circle"></div>
                                  </div><div class="circle-clipper right">
                                    <div class="circle"></div>
                                  </div>
                                </div>
                          
                                <div class="spinner-layer spinner-red">
                                  <div class="circle-clipper left">
                                    <div class="circle"></div>
                                  </div><div class="gap-patch">
                                    <div class="circle"></div>
                                  </div><div class="circle-clipper right">
                                    <div class="circle"></div>
                                  </div>
                                </div>
                          
                                <div class="spinner-layer spinner-yellow">
                                  <div class="circle-clipper left">
                                    <div class="circle"></div>
                                  </div><div class="gap-patch">
                                    <div class="circle"></div>
                                  </div><div class="circle-clipper right">
                                    <div class="circle"></div>
                                  </div>
                                </div>
                          
                                <div class="spinner-layer spinner-green">
                                  <div class="circle-clipper left">
                                    <div class="circle"></div>
                                  </div><div class="gap-patch">
                                    <div class="circle"></div>
                                  </div><div class="circle-clipper right">
                                    <div class="circle"></div>
                                  </div>
                                </div>
                                </div>
                        </div>
                        <br> 
                        <div id="playSong" ng-if="deezerUrlEntered" class="col s12 l9">
                             <!-- Volume slider  -->
                             <p >Playing song!</p>                             

                                  <form action="#" >

                                        <p id="songTime" class="col s2"></p>
                                        <p id="seekWrapper" class="range-field col s4">
                                            
                                            </p>                                    

                                        <p class="col s1">Volume</p>
                                        <p class="range-field col s4">
                                            <input ng-model="vol" ng-change="updateVolume()" type="range" id="volume" value="100" min="0" max="100" />
                                        </p>                                      
                                        <div class="col s1">
                                            
                                    
                                                <button class="btn" ng-if="!currentSong.paused" ng-click="sound.pause(); currentSong.paused = true">⏸</button>
                                                <button class="btn" ng-if="currentSong.paused" ng-click="sound.play(); currentSong.paused = false">▶</button>
                                          </div>
                                      </form>
                                    


                        </div> 
                                         
                </form>
            </div>
        </div>

    </div>

</body>
</html>
